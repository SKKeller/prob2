<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>BMotion Studio</title>
		<meta name="description" content="">
		<meta name="author" content="Lukas Ladenberger">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<link rel="stylesheet" href="/ui/bmsview/bms-editor/css/dot-luv/jquery-ui-1.10.4.custom.min.css">
		<link rel="stylesheet" href="/ui/common/bootstrap.css">
		<link rel="stylesheet" href="/ui/bmsview/bms.css">	
		<script type="text/javascript" src="/ui/libs/jquery.js"></script>
		<script type="text/javascript" src="/ui/libs/bootstrap.js"></script>
		<script type="text/javascript" src="/ui/libs/jquery-ui.js"></script>
		<script type="text/javascript" src="/ui/libs/mustache.js"></script>
		<script type="text/javascript" src="/ui/common/Session.js"></script>
		<script type="text/javascript" src="/ui/bmsview/BMotionStudio.js"></script>
		{{#standalone}}
		<script type="text/javascript" src="/ui/bmsview/BMSStandalone.js"></script>
		{{/standalone}}
	</head>
	<body>
	
		{{#error}}
			{{#standalone}}
			<nav class="navbar navbar-default" role="navigation">
			  <div class="container-fluid">
			    <!-- Brand and toggle get grouped for better mobile display -->
			    <div class="navbar-header">
			      <a class="navbar-brand" href="#">BMotion Studio</a>
			    </div>
			    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			      <ul class="nav navbar-nav navbar-right">
			        <li><a href="#" id="bt_open_template">Open Template</a></li>
			        <li><a href="#" id="bt_create_template">Create Template</a></li>
			      </ul>
			    </div>
			  </div>
			</nav>
			{{/standalone}}
			
			<div style="text-align:center">
				<h3 style="color:red;">Some errors occured</h3>
				<div style="list-style-type: none; color:red; font-weight:bold;">
				{{#errors}}
					<p>{{.}}</p>
				{{/errors}}
				</div>
			</div>
			
		{{/error}}
		{{^error}}

			{{#standalone}}
			<nav class="navbar navbar-default" role="navigation">
			  <div class="container-fluid">
			    <!-- Brand and toggle get grouped for better mobile display -->
			    <div class="navbar-header">
			      <a class="navbar-brand" href="#">BMotion Studio</a>
			    </div>
			
			    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			      <ul class="nav navbar-nav navbar-right">
			        <li><a href="#" id="bt_open_template">Open Template</a></li>
			        <li><a href="#" id="bt_create_template">Create Template</a></li>
			        <li><a href="{{templatefile}}?template={{template}}&lang={{lang}}&editor">Start Editor</a></li>
			        <li class="dropdown">
			          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Open View <b class="caret"></b></a>
			          <ul class="dropdown-menu">
			            <li><a href="#" id="bt_open_events_view">Events</a></li>
			            <li><a href="#" id="bt_open_history_view">History</a></li>
			            <li><a href="#" id="bt_open_animation_view">CurrentAnimations</a></li>
			          </ul>
			        </li>
			      </ul>
			    </div>
			  </div>
			</nav>
			
			<div id="events_view" title="Events">
		  		<iframe src="" id="events_iframe" frameBorder="0"></iframe>
			</div>
			<div id="history_view" title="History">
		  		<iframe src="" id="history_iframe" frameBorder="0"></iframe>
			</div>
			<div id="animation_view" title="CurrentAnimations">
		  		<iframe src="" id="animation_iframe" frameBorder="0"></iframe>
			</div>
			{{/standalone}}
			
			<div id="vis_container">
			</div>
			<script>
				bms.client = "{{clientid}}";
				bms.init("{{clientid}}");
				bms.port = "{{port}}";
				bms.lang = "{{lang}}"
			</script>
		
		{{/error}}
		
		<div class="modal fade" id="modal_open_template">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"
							aria-hidden="true">&times;</button>
						<h4 class="modal-title">Open BMotion Studio Template</h4>
					</div>
					<div class="modal-body">
						<input type="text" class="form-control loadfile_input"
							id="openfile" value="" placeholder="Path to visualisation template file"></input>
						<button onClick="bms.browse('#openfile')" type="button"
							class="load-btn btn btn-primary">Browse ...</button>
						<button id="fb_okbtn" onClick="bms.fb_load_file('#openfile')"
							type="button" class="load-btn btn btn-primary">Ok</button>
					</div>
					<div class="modal-footer">
	      			</div>
				</div>
			</div>
		</div>
		
		<div class="modal fade" id="modal_create_template">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"
							aria-hidden="true">&times;</button>
						<h4 class="modal-title">Create BMotion Studio Template</h4>
					</div>
					<div class="modal-body">
						<input type="text" class="form-control createfile_input"
							id="createfile" value="" placeholder="Path to new visualisation template file"></input>
						<button id="fb_okbtn" onClick="bms.createTemplateFile('#createfile')"
							type="button" class="load-btn btn btn-primary">Ok</button>
					</div>
					<div class="modal-footer">
	      			</div>
				</div>
			</div>
		</div>
		
		<div class="modal fade" id="modal_filedialog">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"
							aria-hidden="true">&times;</button>
						<h4 class="modal-title">Select BMotion Studio Template</h4>
					</div>
					<div id="filedialog_content" class="modal-body"></div>
					<div class="modal-footer">
						<button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>
		
	</body>
</html>